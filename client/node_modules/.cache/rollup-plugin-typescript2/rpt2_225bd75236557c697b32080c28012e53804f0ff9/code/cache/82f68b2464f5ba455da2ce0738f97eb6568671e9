{"code":"var utilsLoaded = false;\r\nvar onmessage = function (e) {\r\n    if (!utilsLoaded) {\r\n        importScripts(e.data.workerResources.workerUtils);\r\n        utilsLoaded = true;\r\n    }\r\n    postMessage(generate(e.data));\r\n};\r\nexport var generate = function (data) {\r\n    var _a = data.rowState, formatCode = _a.formatCode, uppercaseDigit = _a.uppercaseDigit;\r\n    var getRandomNum = utils.randomUtils.getRandomNum;\r\n    var rutNumber = \"\" + getRandomNum(5, 50) + getRandomNum(0, 999) + getRandomNum(0, 999);\r\n    var digit = getDigit(rutNumber);\r\n    var display = '';\r\n    if (formatCode === '12.345.678-9' || formatCode === '12.345.678-9' || formatCode === '12.345.678') {\r\n        display = utils.numberUtils.numberFormat(Number(rutNumber), 0, \",\", \".\");\r\n    }\r\n    else if (formatCode === '12345678-9' || formatCode === '123456789' || formatCode === '12345678') {\r\n        display = rutNumber;\r\n    }\r\n    if (formatCode.indexOf('-') !== -1) {\r\n        display += '-';\r\n    }\r\n    if (formatCode.indexOf('9') !== -1) {\r\n        display += ((uppercaseDigit) ? digit.toUpperCase() : digit);\r\n    }\r\n    return {\r\n        display: display,\r\n        rut: rutNumber,\r\n        digit: digit\r\n    };\r\n};\r\nvar getDigit = function (rut) {\r\n    var rutNumReversedChars = rut.split('').reverse();\r\n    var n = 0;\r\n    for (var i = 0; i < rutNumReversedChars.length; i++) {\r\n        n += parseInt(rutNumReversedChars[i], 10) * (i % 6 + 2);\r\n    }\r\n    var digit = 11 - n % 11;\r\n    if (digit == 10) {\r\n        return \"k\";\r\n    }\r\n    if (digit == 11) {\r\n        return \"0\";\r\n    }\r\n    return digit.toString();\r\n};\r\n//# sourceMappingURL=Rut.generator.js.map","references":["/Users/benkeen/generatedata/client/types/dataTypes.d.ts","/Users/benkeen/generatedata/client/types/exportTypes.d.ts"],"map":"{\"version\":3,\"file\":\"Rut.generator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/plugins/dataTypes/Rut/Rut.generator.ts\"],\"names\":[],\"mappings\":\"AAIA,IAAI,WAAW,GAAG,KAAK,CAAC;AAExB,IAAM,SAAS,GAAG,UAAC,CAAc;IAChC,IAAI,CAAC,WAAW,EAAE;QACjB,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;QAClD,WAAW,GAAG,IAAI,CAAC;KACnB;IAED,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AAC/B,CAAC,CAAC;AAKF,MAAM,CAAC,IAAM,QAAQ,GAAG,UAAC,IAAmB;IACrC,IAAA,KAAiC,IAAI,CAAC,QAAQ,EAA5C,UAAU,gBAAA,EAAE,cAAc,oBAAkB,CAAC;IAE7C,IAAA,YAAY,GAAK,KAAK,CAAC,WAAW,aAAtB,CAAuB;IAC3C,IAAM,SAAS,GAAG,KAAG,YAAY,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,YAAY,CAAC,CAAC,EAAC,GAAG,CAAG,CAAC;IACxF,IAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC;IAElC,IAAI,OAAO,GAAG,EAAE,CAAC;IAEd,IAAI,UAAU,KAAK,cAAc,IAAI,UAAU,KAAK,cAAc,IAAI,UAAU,KAAK,YAAY,EAAE;QACrG,OAAO,GAAG,KAAK,CAAC,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACtE;SAAM,IAAI,UAAU,KAAK,YAAY,IAAI,UAAU,KAAK,WAAW,IAAI,UAAU,KAAK,UAAU,EAAE;QACrG,OAAO,GAAG,SAAS,CAAC;KACpB;IAED,IAAI,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QACnC,OAAO,IAAI,GAAG,CAAC;KACZ;IAEJ,IAAI,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;QACnC,OAAO,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;KAC5D;IAED,OAAO;QACN,OAAO,SAAA;QACP,GAAG,EAAE,SAAS;QACd,KAAK,OAAA;KACL,CAAC;AACH,CAAC,CAAC;AAEF,IAAM,QAAQ,GAAG,UAAC,GAAW;IAC5B,IAAM,mBAAmB,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;IAEpD,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,KAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAChD,CAAC,IAAI,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;KACxD;IAED,IAAM,KAAK,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;IAE1B,IAAI,KAAK,IAAI,EAAE,EAAE;QAChB,OAAO,GAAG,CAAC;KACX;IACD,IAAI,KAAK,IAAI,EAAE,EAAE;QAChB,OAAO,GAAG,CAAC;KACX;IAED,OAAO,KAAK,CAAC,QAAQ,EAAE,CAAC;AACzB,CAAC,CAAC\"}"}
