{"code":"var context = self;\r\nvar workerUtilsLoaded = false;\r\ncontext.onmessage = function (e) {\r\n    var workerResources = e.data.workerResources;\r\n    if (!workerUtilsLoaded) {\r\n        importScripts(workerResources.workerUtils);\r\n        workerUtilsLoaded = true;\r\n    }\r\n    context.postMessage(generate(e.data));\r\n};\r\nvar generate = function (data) {\r\n    var columns = data.columns, rows = data.rows, isFirstBatch = data.isFirstBatch, settings = data.settings;\r\n    var delimiter = settings.delimiter, lineEndings = settings.lineEndings;\r\n    var map = {\r\n        Windows: '\\r\\n',\r\n        Unix: '\\n',\r\n        Mac: '\\r'\r\n    };\r\n    var eol = map[lineEndings];\r\n    var content = '';\r\n    if (isFirstBatch) {\r\n        var titleRow = columns.map(function (_a) {\r\n            var title = _a.title;\r\n            return title;\r\n        }).join(delimiter);\r\n        content += \"\" + titleRow + eol;\r\n    }\r\n    var numCols = columns.length;\r\n    rows.forEach(function (row) {\r\n        var cleanRow = [];\r\n        for (var i = 0; i < numCols; i++) {\r\n            // see if any of the cells contains the delimiter. If it does, wrap the cell in double quotes\r\n            if (row[i].indexOf(delimiter) !== -1) {\r\n                cleanRow.push(\"\\\"\" + rows[i] + \"\\\"\");\r\n            }\r\n            else {\r\n                cleanRow.push(row[i]);\r\n            }\r\n        }\r\n        content += cleanRow.join(delimiter) + eol;\r\n    });\r\n    return content;\r\n};\r\n//# sourceMappingURL=CSV.generator.js.map","references":["/Users/benkeen/generatedata/client/types/exportTypes.d.ts"],"map":"{\"version\":3,\"file\":\"CSV.generator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/plugins/exportTypes/CSV/CSV.generator.ts\"],\"names\":[],\"mappings\":\"AAEA,IAAM,OAAO,GAAW,IAAW,CAAC;AAEpC,IAAI,iBAAiB,GAAG,KAAK,CAAC;AAC9B,OAAO,CAAC,SAAS,GAAG,UAAC,CAAc;IAC1B,IAAA,eAAe,GAAK,CAAC,CAAC,IAAI,gBAAX,CAAY;IAEnC,IAAI,CAAC,iBAAiB,EAAE;QACvB,aAAa,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;QAC3C,iBAAiB,GAAG,IAAI,CAAC;KACzB;IAED,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACvC,CAAC,CAAC;AAEF,IAAM,QAAQ,GAAG,UAAC,IAAmB;IAC5B,IAAA,OAAO,GAAmC,IAAI,QAAvC,EAAE,IAAI,GAA6B,IAAI,KAAjC,EAAE,YAAY,GAAe,IAAI,aAAnB,EAAE,QAAQ,GAAK,IAAI,SAAT,CAAU;IAC/C,IAAA,SAAS,GAAkB,QAAQ,UAA1B,EAAE,WAAW,GAAK,QAAQ,YAAb,CAAc;IAE5C,IAAM,GAAG,GAAQ;QAChB,OAAO,EAAE,MAAM;QACf,IAAI,EAAE,IAAI;QACV,GAAG,EAAE,IAAI;KACT,CAAC;IACF,IAAM,GAAG,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC;IAE7B,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,IAAI,YAAY,EAAE;QACjB,IAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,UAAC,EAAS;gBAAP,KAAK,WAAA;YAAO,OAAA,KAAK;QAAL,CAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACnE,OAAO,IAAI,KAAG,QAAQ,GAAG,GAAK,CAAC;KAC/B;IAED,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;IAC/B,IAAI,CAAC,OAAO,CAAC,UAAC,GAAG;QAChB,IAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,KAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,OAAO,EAAE,CAAC,EAAE,EAAE;YAC7B,6FAA6F;YAC7F,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;gBACrC,QAAQ,CAAC,IAAI,CAAC,OAAI,IAAI,CAAC,CAAC,CAAC,OAAG,CAAC,CAAC;aAC9B;iBAAM;gBACN,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;aACtB;SACD;QACD,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,OAAO,OAAO,CAAC;AAChB,CAAC,CAAC\"}"}
